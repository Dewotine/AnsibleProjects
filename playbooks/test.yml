---
- hosts: "{{ filter }}:&dc_{{ dc }}"
# - hosts: "vps528223.ovh.net"
#- hosts: "piwigo"
  become: true
  vars:
    my_piwigo_user:
      user1:
        password: "password1"
        email: "essai10@gmail.com"
      user2:
        password: "password2"
        email: "essai20@gmail.com"
        name: "essai3"
        password: "password3"
        email: "essai30@gmail.com"
  tasks:
#    - name: "Un petit essai de création d'utilisateur"
#      piwigo_user:
#        name: "{{ item.key }}"
#        password: "{{ item.value.password }}"
#        email: "{{ item.value.email }}"
#        url_username: "piwigo_admin"
#        url_password: "H€2cumzv"
#        url: "http://piwigo.bleschet.fr:8080"
#        state: "present"
#      with_dict: "{{ my_piwigo_user }}"
#    - name: "Un petit essai de creation de categorie"
#      piwigo_category:
#        name: "ma categorie test supplémentaire"
#        url_username: "piwigo_admin"
#        url_password: "H€2cumzv"
#        url: "http://piwigo.bleschet.fr:8080"
#        state: "present"
#
#    - name: "Un petit essai de création d'utilisateur"
#      piwigo_user:
#        name: "user2"
#        password: "password"
#        password_confirm: "password"
#        email: "user2@gmail.com"
#        url_username: "piwigo_admin"
#        url_password: "H€2cumzv"
#        url: "http://piwigo.bleschet.fr:8080"
#        state: "present"
#


#
#    - name: "Test de création de groupe"
#      piwigo_group:
#        name: "testgroup"
#        state: "present"
#        url_username: "piwigo_admin"
#        url_password: "H€2cumzv"
#        url: "http://piwigo.bleschet.fr:8080"
#
#    - name: "Test de suppression d'utilisateurs"
#      piwigo_user:
#        name: "user1"
#        state: "absent"
#        url_username: "piwigo_admin"
#        url_password: "H€2cumzv"
#        url: "http://piwigo.bleschet.fr:8080"
#
#    - name: "Test autorisation"
#      piwigo_permissions:
#        cat_name:
#          - "ma categorie test"
#        user_name:
#          - "essai2"
#          - "testonze"
#          - "essai3"
#          - "essai1"
#        group_name:
#          - "testgroup"
#          - "testgroup2"
#        url_username: "piwigo_admin"
#        url_password: "H€2cumzv"
#        url: "http://piwigo.bleschet.fr:8080"
#
#    - name: "Test de création de groupe"
#      piwigo_group:
#        name: "testgroup"
#        state: "present"
#        user_list:
#          - "user"
#          - "user2"
#          - "user3"
#        url_username: "piwigo_admin"
#        url_password: "H€2cumzv"
#        url: "http://piwigo.bleschet.fr:8080"
#
#    - name: "Test de suppression de groupe"
#      piwigo_group:
#        name: "testgroup"
#        state: "absent"
#        url_username: "piwigo_admin"
#        url_password: "H€2cumzv"
#        url: "http://piwigo.bleschet.fr:8080"


#    - name: "Un petit essai de creation de categorie"
#      piwigo_category:
#        name: "Categorie2"
#        url_username: "piwigo_admin"
#        url_password: "H€2cumzv"
#        url: "http://piwigo.bleschet.fr:8080"
#        state: "present"
#
#    - name: "Modificaion de catégorie de categorie"
#      piwigo_category:
#        name: "Categorie2"
#        comment: "Test Ansible3"
#        status: "private"
#        url_username: "piwigo_admin"
#        url_password: "H€2cumzv"
#        url: "http://piwigo.bleschet.fr:8080"
#        state: "present"

    - name: "Un petit essai de suppression  de categorie"
      piwigo_category:
        name: "Categorie2"
        url_username: "piwigo_admin"
        url_password: "H€2cumzv"
        url: "http://piwigo.bleschet.fr:8080"
        state: "absent"

